<div class="container mt-5">
  <div class="form-wrapper">
    <div class="form-header">
      <h2>Human Movement Analysis</h2>
      <p>Upload a video to analyze human movement patterns</p>
    </div>

    <form (ngSubmit)="onSubmit()" class="section-card">
      <div class="section-content">
        <div class="mb-3 text-center">
          <label for="fileInput" class="file-upload-label">
            <i class="bi bi-upload me-2"></i> Choose Video File
            <span class="btn-pulse"></span>
          </label>
          <input
            type="file"
            id="fileInput"
            class="d-none"
            (change)="onFileChange($event)"
            accept="video/*"
            required
          />
          <div *ngIf="selectedFileName" class="selected-file">
            <i class="bi bi-file-earmark-play"></i> Selected file: {{ selectedFileName }}
          </div>
        </div>

        <button type="submit" class="btn-analyze" [disabled]="isLoading || !videoFile">
          <i *ngIf="isLoading" class="bi bi-arrow-clockwise spinner-border spinner-border-sm me-2"></i>
          Analyze Video
          <span class="btn-pulse"></span>
        </button>
      </div>
    </form>

    <!-- Loading Spinner -->
    <div *ngIf="isLoading" class="spinner-container">
      <div class="spinner-border" role="status"></div>
      <p class="mt-2">Analysis in progress... Please wait.</p>
    </div>

    <!-- Status Messages -->
    <div *ngIf="errorMessage" class="alert alert-danger mt-4">
      <i class="bi bi-x-circle me-2"></i>
      <span>{{ errorMessage }}</span>
    </div>

    <div *ngIf="successMessage" class="alert alert-success mt-4">
      <i class="bi bi-check-circle me-2"></i>
      <span>{{ successMessage }}</span>
    </div>

    <!-- Analysis Results -->
    <div *ngIf="heatmapPath || movementChartPath || clusterSalesPath || recommendations" class="mt-4">
      <h4 class="text-center mb-3">Analysis Results</h4>

      <div *ngIf="heatmapPath" class="result-card">
        <h5><i class="bi bi-thermometer-sun"></i> Heatmap Visualization</h5>
        <div class="text-center">
          <img [src]="heatmapPath" alt="Heatmap visualization" class="img-fluid" />
        </div>
        <p class="mt-2 text-muted">This heatmap shows density of human movement in the space.</p>
      </div>

      <div *ngIf="movementChartPath" class="result-card">
        <h5><i class="bi bi-graph-up-arrow"></i> Movement Flow Diagram</h5>
        <div class="text-center">
          <img [src]="movementChartPath" alt="Movement flow diagram" class="img-fluid" />
        </div>
        <p class="mt-2 text-muted">Visualization of common movement paths and directions.</p>
      </div>

      <div *ngIf="clusterSalesPath" class="result-card">
        <h5><i class="bi bi-shop"></i> Sales Activity Clusters</h5>
        <div class="text-center">
          <img [src]="clusterSalesPath" alt="Sales activity clusters" class="img-fluid" />
        </div>
        <p class="mt-2 text-muted">Areas with highest customer engagement and sales potential.</p>
      </div>

      <!-- Enhanced Recommendations Section -->
      <div *ngIf="recommendations" class="result-card recommendations-card">
        <div class="recommendations-header">
          <i class="bi bi-lightbulb"></i>
          <h5>Actionable Recommendations</h5>
        </div>

        <div class="recommendations-content">
          <div [innerHTML]="recommendations"></div>
        </div>

       
      </div>
    </div>
  </div>
</div>
